<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="MyShop_Frontend.Views.Controls.Order.CreateOrderControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShop_Frontend.Views.Controls.Order"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">


    <UserControl.Resources>
        <SolidColorBrush x:Key="MutedTextBrush" Color="#7A000000"/>
        <SolidColorBrush x:Key="CardBorderBrush" Color="#14000000"/>

        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#151D48"/>
        </Style>

        <Style x:Key="FieldLabel" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{StaticResource MutedTextBrush}"/>
        </Style>

        <Style x:Key="SmallIconBtn" TargetType="Button">
            <Setter Property="Width" Value="26"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Background" Value="#F3F4F6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>
    </UserControl.Resources>

    <ScrollViewer MaxHeight="640">
        <StackPanel Spacing="14" Padding="2">

            <!-- Customer Information -->
            <TextBlock Text="Customer Information" Style="{StaticResource SectionTitle}"/>

            <Grid ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Spacing="6">
                    <TextBlock Text="Full Name" Style="{StaticResource FieldLabel}"/>
                    <TextBox x:Name="FullNameBox" PlaceholderText="John Smith"/>
                    <TextBlock Text="Gold Member — 5% Discount" FontSize="11" Foreground="{StaticResource MutedTextBrush}"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Spacing="6">
                    <TextBlock Text="Phone Number" Style="{StaticResource FieldLabel}"/>
                    <TextBox x:Name="PhoneBox" PlaceholderText="123-456-7890"/>
                </StackPanel>
            </Grid>

            <!-- Payment Method -->
            <TextBlock Text="Payment Method" Style="{StaticResource SectionTitle}"/>
            <ComboBox x:Name="PaymentCombo" SelectedIndex="0">
                <ComboBoxItem Content="Credit/Debit Card"/>
                <ComboBoxItem Content="Cash"/>
                <ComboBoxItem Content="Bank Transfer"/>
            </ComboBox>

            <!-- Notes -->
            <TextBlock Text="Order Notes" Style="{StaticResource SectionTitle}"/>
            <TextBox x:Name="NotesBox"
                     PlaceholderText="Type your notes here..."
                     AcceptsReturn="True"
                     Height="90"/>

            <!-- Discount -->
            <TextBlock Text="Discount" Style="{StaticResource SectionTitle}"/>
            <TextBox x:Name="CouponBox" PlaceholderText="Coupon code"/>

            <!-- Items -->
            <TextBlock Text="Item" Style="{StaticResource SectionTitle}"/>

            <!-- Header row -->
            <Grid Padding="0,4,0,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="110"/>
                    <ColumnDefinition Width="80"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Item" FontSize="12" Foreground="{StaticResource MutedTextBrush}"/>
                <TextBlock Grid.Column="1" Text="Stock" FontSize="12" Foreground="{StaticResource MutedTextBrush}" HorizontalAlignment="Center"/>
                <TextBlock Grid.Column="2" Text="Qty" FontSize="12" Foreground="{StaticResource MutedTextBrush}" HorizontalAlignment="Center"/>
                <TextBlock Grid.Column="3" Text="Price" FontSize="12" Foreground="{StaticResource MutedTextBrush}" HorizontalAlignment="Right"/>
            </Grid>

            <ListView ItemsSource="{x:Bind Items}"
                      SelectionMode="None"
                      BorderBrush="{StaticResource CardBorderBrush}"
                      BorderThickness="1"
                      CornerRadius="12">

                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="local:OrderItemRow">
                        <Grid Padding="10" ColumnSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="110"/>
                                <ColumnDefinition Width="80"/>
                            </Grid.ColumnDefinitions>

                            <!-- item name -->
                            <TextBlock Text="{x:Bind Name}" TextWrapping="WrapWholeWords"/>

                            <!-- stock -->
                            <TextBlock Grid.Column="1" Text="{x:Bind Stock}"
                                       HorizontalAlignment="Center"
                                       Foreground="{StaticResource MutedTextBrush}"/>

                            <!-- qty stepper (-  number  +) -->
                            <Border Grid.Column="2" Background="#F3F4F6" CornerRadius="10" Padding="6">
                                <Grid ColumnSpacing="6">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Button Style="{StaticResource SmallIconBtn}"
                                            Content="−"
                                            Click="QtyMinus_Click"/>

                                    <TextBlock Grid.Column="1"
                                               Text="{x:Bind Qty}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               FontWeight="SemiBold"/>

                                    <Button Grid.Column="2"
                                            Style="{StaticResource SmallIconBtn}"
                                            Content="+"
                                            Click="QtyPlus_Click"/>
                                </Grid>
                            </Border>

                            <!-- price -->
                            <TextBlock Grid.Column="3" Text="{x:Bind PriceText}" HorizontalAlignment="Right"/>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Totals -->
            <StackPanel HorizontalAlignment="Right" Spacing="4" Margin="0,6,0,0">
                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Subtotal" Foreground="{StaticResource MutedTextBrush}"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind SubtotalText, Mode=OneWay}" HorizontalAlignment="Right"/>
                </Grid>

                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Discount" Foreground="{StaticResource MutedTextBrush}"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind DiscountText, Mode=OneWay}" HorizontalAlignment="Right"/>
                </Grid>

                <Grid ColumnSpacing="16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="Total" FontWeight="SemiBold"/>
                    <TextBlock Grid.Column="1" Text="{x:Bind TotalText, Mode=OneWay}" FontWeight="SemiBold" HorizontalAlignment="Right"/>
                </Grid>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</UserControl>
