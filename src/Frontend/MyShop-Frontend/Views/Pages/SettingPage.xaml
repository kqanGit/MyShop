<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="MyShop_Frontend.Views.Pages.SettingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShop_Frontend.Views.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <Style x:Key="SettingSectionStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>

        <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,16"/>
        </Style>

        <Style x:Key="SettingItemStyle" TargetType="Grid">
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>
    </Page.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Padding="24" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="Settings" FontSize="24" FontWeight="Bold"/>
                    <TextBlock Text="Manage your application preferences and configurations" 
                               FontSize="14" 
                               Foreground="Gray" 
                               Margin="0,4,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12">
                    <Button Background="#22C55E"
                            Foreground="White"
                            CornerRadius="8"
                            Padding="16,10"
                            Command="{Binding SaveChangesCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE74E;" FontSize="14"/>
                            <TextBlock Text="Save Changes"/>
                        </StackPanel>
                    </Button>

                    <Button Background="#F1F5F9"
                            CornerRadius="8"
                            Padding="16,10"
                            Command="{Binding ResetToDefaultCommand}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE72C;" FontSize="14" Foreground="#475569"/>
                            <TextBlock Text="Reset to Default" Foreground="#475569"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Settings Content -->
            <StackPanel Grid.Row="1">

                <!-- General Settings Section -->
                <Border Style="{StaticResource SettingSectionStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                            <FontIcon Glyph="&#xE713;" FontSize="20" Foreground="#5D5FEF"/>
                            <TextBlock Text="General Settings" Style="{StaticResource SectionTitleStyle}"/>
                        </StackPanel>

                        <!-- Items Per Page -->
                        <Grid Style="{StaticResource SettingItemStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Items Per Page" FontWeight="Medium"/>
                                <TextBlock Text="Number of items to display per page in lists" 
                                           Foreground="#64748B" 
                                           FontSize="13" 
                                           Margin="0,4,0,0"/>
                            </StackPanel>

                            <ComboBox Grid.Column="1"
                                      MinWidth="120"
                                      ItemsSource="{Binding ItemsPerPageOptions}"
                                      SelectedItem="{Binding ItemsPerPage, Mode=TwoWay}" />
                        </Grid>

                        <!-- Last Opened Module -->
                        <Grid Style="{StaticResource SettingItemStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Remember Last Module" FontWeight="Medium"/>
                                <TextBlock Text="Open the last used module when starting the application" 
                                           Foreground="#64748B" 
                                           FontSize="13" 
                                           Margin="0,4,0,0"/>
                            </StackPanel>

                            <ToggleSwitch Grid.Column="1" IsOn="{Binding RememberLastModule, Mode=TwoWay}"/>
                        </Grid>

                        <!-- Auto Refresh -->
                        <Grid Style="{StaticResource SettingItemStyle}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Auto Refresh Dashboard" FontWeight="Medium"/>
                                <TextBlock Text="Automatically refresh dashboard data every 5 minutes" 
                                           Foreground="#64748B" 
                                           FontSize="13" 
                                           Margin="0,4,0,0"/>
                            </StackPanel>

                            <ToggleSwitch Grid.Column="1" IsOn="{Binding AutoRefreshDashboard, Mode=TwoWay}"/>
                        </Grid>

                    </StackPanel>
                </Border>

                <!-- About Section -->
                <Border Style="{StaticResource SettingSectionStyle}">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                            <FontIcon Glyph="&#xE946;" FontSize="20" Foreground="#5D5FEF"/>
                            <TextBlock Text="About" Style="{StaticResource SectionTitleStyle}"/>
                        </StackPanel>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Image Grid.Column="0"
                                   Width="64" 
                                   Height="64"
                                   Margin="0,0,16,0">
                                <Image.Source>
                                    <BitmapImage UriSource="ms-appx:///Assets/StoreLogo.png"/>
                                </Image.Source>
                            </Image>

                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="MyShop - Supermarket Management" 
                                           FontSize="16" 
                                           FontWeight="SemiBold"/>
                                <TextBlock Text="Version 1.0.0" 
                                           Foreground="#64748B" 
                                           Margin="0,4,0,0"/>
                                <TextBlock Text="Â© 2024 MyShop Team. All rights reserved." 
                                           Foreground="#64748B" 
                                           FontSize="12"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

            </StackPanel>
        </Grid>
    </ScrollViewer>
</Page>
